jQuery(document).ready(function(a){function e(){var e=t();a("[class^='libhours-']").each(function(l,t){var u,i=a(this).attr("class").split("-")[1];if("chart"==i)a('<div class="libhours-loading">Hours table loading; please wait...</div>').insertBefore(a(this)),u='<div id="homepagehours"><ul class="homeul left"></ul></div>',a(this).replaceWith(u),r(),a(".libhours-loading").remove();else{if(a(this).attr("class").split("-")[2])return;if(i in o){var n=o[i],s=n.jsonData.hours;n.specialHours&&(s=n.specialHours),u='<a href="'+n.calURL+'">Hours</a>, '+e+s}else u="ERROR: Unknown library name '"+i+"'.","undefined"!=typeof console&&console.error(u);a(this).append(u),a(this).removeClass("libhours-"+i).addClass("libhours-"+i+"-filled")}})}function r(){a("#homepagehours").hide();for(var e in o)if(library=o[e],!(a.inArray(library.libID,n)<0)){var r=library.jsonData.name;library.hasOwnProperty("altName")&&(r=library.altName);var l=library.jsonData.hours;library.hasOwnProperty("specialHours")&&(l=library.specialHours);var t=a("<li></li>");a("<a></a>").text(r).attr("href",library.jsonData.url).appendTo(t);t.append('<span class="libhours-vertical-bar">&#160;|&#160;</span>');a("<a></a>").text("hours").addClass("hours").attr("href",library.calURL).appendTo(t);t.append(l),a("ul.left").append(t)}u(),a("#homepagehours").show()}function l(a){for(var e in o){var r=o[e];if(r.libID===a)return r}throw"Couldn't find library with libID: "+a}function t(){var a=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],e=new Date;return a[e.getMonth()]+" "+e.getDate()}function u(){var e=a("#homepagehours ul.homeul.left li").length,r=e%2,l=Math.floor(e/2)+r;if(l>0){var t="";a("#homepagehours ul.homeul.left li").slice(0,l).each(function(){t+=a(this)[0].outerHTML});var u="";a("#homepagehours ul.homeul.left li").slice(l).each(function(){u+=a(this)[0].outerHTML});var i='<ul class="homeul left">'+t+'</ul><ul class="homeul right">'+u+'<li class="morehoursinfo"><a href="http://www.library.upenn.edu/locations/">more info...</a></li></ul>';a("#homepagehours ul.homeul.left").replaceWith(i),a("#homepagehours ul.homeul.left li:nth-child(odd), #homepagehours ul.homeul.right li:nth-child(odd)").addClass("even"),a("#homepagehours ul.homeul.left li:nth-child(even), #homepagehours ul.homeul.right li:nth-child(even)").addClass("odd")}}var i,o={annenberg:{libID:306,calURL:"http://www.library.upenn.edu/about/hours/annenberg"},bll:{libID:"BLL",calURL:"https://www.law.upenn.edu/library/",jsonData:{name:"Biddle Law Library",hours:"",url:"http://www.law.upenn.edu/bll/"}},biomed:{libID:305,calURL:"http://www.library.upenn.edu/about/hours/biomed"},chemistry:{libID:412,calURL:"http://www.library.upenn.edu/about/hours/chemistry"},dental:{libID:425,calURL:"http://www.library.upenn.edu/about/hours/dental",altName:"Dental Library"},edcom:{libID:168,calURL:"http://www.library.upenn.edu/about/hours/edcom"},finearts:{libID:427,calURL:"http://www.library.upenn.edu/about/hours/finearts",altName:"Fine Arts Library"},imgcoll:{libID:643,calURL:"http://www.library.upenn.edu/about/hours/fineartsimage"},kislak:{libID:429,calURL:"http://www.library.upenn.edu/about/hours/kislak"},rbm:{libID:455,calURL:"http://www.library.upenn.edu/about/hours/reading",altName:"Kislak Center Reading Room"},goldstein:{libID:683,calURL:"http://www.library.upenn.edu/about/hours/gallery"},furness:{libID:684,calURL:"http://www.library.upenn.edu/about/hours/furness"},lcajs:{libID:431,calURL:"http://www.library.upenn.edu/about/hours/lcajs"},libra:{libID:430,calURL:"http://www.library.upenn.edu/about/hours/libra"},lippincott:{libID:433,calURL:"http://www.library.upenn.edu/about/hours/lippincott"},mpa:{libID:434,calURL:"http://www.library.upenn.edu/about/hours/mpa"},museum:{libID:435,calURL:"http://www.library.upenn.edu/about/hours/museum"},music:{libID:436,calURL:"http://www.library.upenn.edu/about/hours/music"},ormandy:{libID:453,calURL:"http://www.library.upenn.edu/about/hours/ormandy"},pennhosp:{libID:410,calURL:"http://www.library.upenn.edu/about/hours/pennhosp"},vp:{libID:437,calURL:"http://www.library.upenn.edu/about/hours/vp"},vpusc:{libID:457,calURL:"http://www.library.upenn.edu/about/hours/vpusc",altName:"Van Pelt Undergrad. Study Center"},vpcafe:{libID:685,calURL:"http://www.library.upenn.edu/about/hours/cafe"},vpill:{libID:650,calURL:"http://www.library.upenn.edu/about/hours/vpill"},vpref:{libID:686,calURL:"http://www.library.upenn.edu/about/hours/vpref"},vetc:{libID:438,calURL:"http://www.library.upenn.edu/about/hours/vetc",altName:"Veterinary Library - Campus"},vetnbc:{libID:456,calURL:"http://www.library.upenn.edu/about/hours/vetnbc",altName:"Veterinary Library - NBC"},wic:{libID:166,calURL:"http://www.library.upenn.edu/about/hours/wic"},vitale:{libID:167,calURL:"http://www.library.upenn.edu/about/hours/medialab"}},n=[306,"BLL",305,412,425,168,427,429,431,430,433,434,435,453,455,437,457,438,456,166];i="www.library.upenn.edu"===window.location.hostname?a.ajax({url:"/access/specialhours/specialdaysettings.html",type:"GET",cache:!1,dataType:"html",timeout:2e3}).then(function(e){return a.Deferred(function(r){try{var l=a.parseJSON(a(e).find("#specialdayjson").html());l.featureEnabled&&a.each(l.specialHours,function(a,e){e.enabled&&(o[a].specialHours=": "+e.specialHours)})}catch(a){"undefined"!=typeof console&&console.error("SpecialDayJSON Error: "+a)}r.resolve()})},function(a,e,r){"undefined"!=typeof console&&"timeout"===e&&console.error("SpecialDayJSON: TIMEOUT.")}):a.Deferred(function(a){a.resolve()}),a.ajax({url:"https://api3.libcal.com/api_hours_today.php?iid=335&lid=0&format=json",type:"GET",cache:!1,dataType:"jsonp"}).done(function(r){a.each(r.locations,function(a,e){var r=": "+e.rendered,t={lid:e.lid,name:e.name,hours:r,url:e.url};try{l(e.lid).jsonData=t}catch(a){}}),a.when(i).always(function(){e()})}).fail(function(a,e,r){"undefined"!=typeof console&&console.error("LibCalJSON: HTTP-GET failure. Status: "+e+", Error: "+r)})});